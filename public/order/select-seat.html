<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Select Seats</title>
    <script>
        fetch('/partials/head-order-tickets.html')
        .then(res => res.text())
        .then(data => {
            document.head.insertAdjacentHTML('beforeend', data);
        });
    </script>
</head>
<body id="ctl00_pageBody" class="ltr">
    <label class="logo"><a href="/">Cinema <span class="logo-name">Tickets</span></a></label>
    
    <!-- Замяна на th:replace за езиковата форма -->
    <!-- Включи съдържанието от fragments/commons::form.language -->
    
    <form method="post"
    action="/order/select-seats/{{orderId}}/movie/{{movieId}}">
    <div id="pagecontainer" class="pagecontainer selectseatpageres">
        <div class="wrap">
            <div id="header">
                <div id="logo"></div>
            </div>
            
            <div class="steps">
                <div class="step"><span>1</span><label>Ticket selection</label></div>
                <div class="step onstep"><span>2</span><label>Seats selection</label></div>
                <div class="step"><span>3</span><label>Confirmation</label></div>
                <div class="step last"><span>4</span><label>Order completion</label></div>
                <div class="clear"></div>
            </div>
            
            <div class="sidebar">
                <div class="selectionInfo">
                    <div class="selectionInfoInner">
                        <div class="movieName">
                            <h3>{{ movieName }}</h3>
                        </div>
                        <div class="eventdate">
                            {{ projectionDate }} {{ bookingTime }}
                        </div>
                        <div class="siteinfo">
                            <span>City: {{ location }}</span><br/>
                            <span>Hall: {{ hallNumber }}</span><br/>
                            <span id="rating" class="rating restricted">Category: {{ category }}</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="main">
                <div class="seatplan">
                    <div id="premium" style="display:none"></div>
                    <h1>Seats selection</h1>
                    <div id="seatselection" class="message required">
                        Please select {{ ticketsCount }} seat/s.
                    </div>
                    
                    <div class="splegend">
                        <div class="legendContainer">
                            <div class="legend">
                                <img alt src="/images/icons/SeatAvailable.png" class="graphic available"/>
                                <span class="label">Free seats</span>
                            </div>
                            <div class="legend">
                                <img alt src="/images/icons/SeatUnavailable.png" class="graphic available"/>
                                <span class="label">Occupied seats</span>
                            </div>
                            <div class="legend">
                                <img alt src="/images/icons/SeatSelected.png" class="graphic available"/>
                                <span class="label">Your choice</span>
                            </div>
                        </div>
                    </div>
                    
                    <style>
                        #SeatPlanContainer #myCanvas {
                            width: 100%;
                        }
                    </style>
                    
                    <div class="seatplanControl">
                        <div class="screen"><img src="/images/icons/screen.png"/></div>
                        <div id="SeatPlanContainer" style="direction:ltr;">
                            <div id="panzoom-parent" style="padding:0;">
                                <canvas id="myCanvas" style="background-color: rgba(203,203,203,0);" class="panzoom"></canvas>
                            </div>
                        </div>
                        
                        <!-- Начало на местата -->
                        <div class="row-seat">
                            <span class="row-number">1</span>
                            <!-- Примерен блок за седалки (можеш да го рендираш динамично с JS/Vue) -->
                            <!-- Повтори го с цикъл по места и редове -->
                            <label class="seatt" for="r1c1">1
                                <input class="hidden" type="checkbox" id="r1c1" value="booked" name="seats[0][0]">
                            </label>
                            <label class="seatt" for="r1c2">2
                                <input class="hidden" type="checkbox" value="r1c2" id="r1c2" name="seats[0][1]">
                            </label>
                            <label class="seatt" for="r1c3">3
                                <input class="hidden" type="checkbox" value="r1c3" id="r1c3" name="seats[0][2]">
                            </label>
                            <label class="seatt" for="r1c4">4
                                <input class="hidden" type="checkbox" value="r1c4" id="r1c4" name="seats[0][3]">
                            </label>
                            <label class="seatt" for="r1c5">5
                                <input class="hidden" type="checkbox" id="r1c5" value="booked" name="seats[0][4]">
                            </label>
                            <label class="seatt" for="r1c6">6
                                <input class="hidden" type="checkbox" value="r1c6" id="r1c6" name="seats[0][5]">
                            </label>
                            <label class="seatt" for="r1c7">7
                                <input class="hidden" type="checkbox" value="r1c7" id="r1c7" name="seats[0][6]">
                            </label>
                            <label class="seatt" for="r1c8">8
                                <input class="hidden" type="checkbox" value="r1c8" id="r1c8" name="seats[0][7]">
                            </label>
                            <label class="seatt" for="r1c9">9
                                <input class="hidden" type="checkbox" id="r1c9" value="booked" name="seats[0][8]">
                            </label>
                            <label class="seatt" for="r1c10">10
                                <input class="hidden" type="checkbox" value="r1c10" id="r1c10" name="seats[0][9]">
                            </label>
                            <label class="seatt" for="r1c11">11
                                <input class="hidden" type="checkbox" value="r1c11" id="r1c11" name="seats[0][10]">
                            </label>
                            <label class="seatt" for="r1c12">12
                                <input class="hidden" type="checkbox" value="r1c12" id="r1c12" name="seats[0][11]">
                            </label>
                            <label class="seatt" for="r1c13">13
                                <input class="hidden" type="checkbox" id="r1c13" value="booked" name="seats[0][12]">
                            </label>
                            <label class="seatt" for="r1c14">14
                                <input class="hidden" type="checkbox" value="r1c14" id="r1c14" name="seats[0][13]">
                            </label>
                            <label class="seatt" for="r1c15">15
                                <input class="hidden" type="checkbox" value="r1c15" id="r1c15" name="seats[0][144]">
                            </label>
                            <label class="seatt" for="r1c16">16
                                <input class="hidden" type="checkbox" value="r1c16" id="r1c16" name="seats[0][15]">
                            </label>
                            <label class="seatt" for="r1c17">17
                                <input class="hidden" type="checkbox" value="r1c17" id="r1c17" name="seats[0][16]">
                            </label>
                            <label class="seatt" for="r1c18">18
                                <input class="hidden" type="checkbox" value="r1c18" id="r1c18" name="seats[0][17]">
                            </label>
                            <label class="seatt" for="r1c19">19
                                <input class="hidden" type="checkbox" id="r1c19" value="booked" name="seats[0][18]">
                            </label>
                            <label class="seatt" for="r1c20">20
                                <input class="hidden" type="checkbox" value="r1c20" id="r1c20" name="seats[0][19]">
                            </label>
                        </div>
                        
                        <div class="row-seat">
                            <span class="row-number">2</span>
                            <!-- Повторение за ред 2 -->
                            <!-- ... -->
                        </div>
                        
                        <div id="accesibleSeatPlanContainer">
                            <table class="tableSP"></table>
                        </div>
                    </div>
                    
                    <div class="actionHolder">
                        <input type="submit" class="actionBtn" value="Continue"/>
                        <a href="/order/buy-tickets/{{orderId}}/movie/{{movieId}}/time/{{timeId}}"
                        id="backBtn" class="cancelBtn back-link">Back</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<footer id="footer"></footer>
<script type="module" src="/js/main.js"></script>
<script src="/js/select_seat_script.js"></script>
</body>
</html>
